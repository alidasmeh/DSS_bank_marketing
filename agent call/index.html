<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <title>Get Advice - Professional Form</title>
</head>
<body>


    <div class="container mt-5">
        <div class="card">
            <div class="card-body">
                <h2 class="card-title text-center mb-4">Get Advice for next target</h2>
    
                <form id="form" method="post" onsubmit="submitForm(event)">

                    <!-- 1. Age (Numeric) -->
                    <div class="form-group">
                        <label for="age">Age:</label>
                        <input type="number" class="form-control" id="age" name="age" value="44">
                    </div>
            
                    <!-- 2. Job (Categorical) -->
                    <div class="form-group">
                        <label for="job">Job:</label>
                        <select class="form-control" id="job" name="job" >
                            <option value="admin.">Admin</option>
                            <option value="blue-collar">Blue Collar</option>
                            <option value="entrepreneur">Entrepreneur</option>
                            <option value="housemaid">Housemaid</option>
                            <option value="management">Management</option>
                            <option value="retired">Retired</option>
                            <option value="self-employed">Self-Employed</option>
                            <option value="services">Services</option>
                            <option value="student">Student</option>
                            <option value="technician">Technician</option>
                            <option value="unemployed">Unemployed</option>
                            <option value="null">Unknown</option>
                        </select>
                    </div>
            
                    <!-- 3. Marital (Categorical) -->
                    <div class="form-group">
                        <label for="marital">Marital Status:</label>
                        <select class="form-control" id="marital" name="marital" >
                            <option value="divorced">Divorced</option>
                            <option value="married">Married</option>
                            <option value="single">Single</option>
                            <option value="null">Unknown</option>
                        </select>
                    </div>
            
                    <!-- 4. Education (Categorical) -->
                    <div class="form-group">
                        <label for="education">Education:</label>
                        <select class="form-control" id="education" name="education" >
                            <option value="basic.4y">Basic 4y</option>
                            <option value="basic.6y">Basic 6y</option>
                            <option value="basic.9y">Basic 9y</option>
                            <option value="high.school">High School</option>
                            <option value="illiterate">Illiterate</option>
                            <option value="professional.course">Professional Course</option>
                            <option value="university.degree">University Degree</option>
                            <option value="null">Unknown</option>
                        </select>
                    </div>
            
                    <!-- 5. Default (Categorical) -->
                    <div class="form-group">
                        <label for="default">Has credit in default?</label>
                        <select class="form-control" id="default" name="default" >
                            <option value="no">No</option>
                            <option value="yes">Yes</option>
                            <option value="null">Unknown</option>
                        </select>
                    </div>
            
                    <!-- 6. Housing (Categorical) -->
                    <div class="form-group">
                        <label for="housing">Has housing loan?</label>
                        <select class="form-control" id="housing" name="housing" >
                            <option value="no">No</option>
                            <option value="yes">Yes</option>
                            <option value="null">Unknown</option>
                        </select>
                    </div>
            
                    <!-- 7. Loan (Categorical) -->
                    <div class="form-group">
                        <label for="loan">Has personal loan?</label>
                        <select class="form-control" id="loan" name="loan" >
                            <option value="no">No</option>
                            <option value="yes">Yes</option>
                            <option value="null">Unknown</option>
                        </select>
                    </div>
            
                    <!-- 8. Contact (Categorical) -->
                    <div class="form-group">
                        <label for="contact">Contact communication type:</label>
                        <select class="form-control" id="contact" name="contact" >
                            <option value="cellular">Cellular</option>
                            <option value="telephone">Telephone</option>
                            <option value="null">Unknown</option>
                        </select>
                    </div>
            
                    <!-- 9. Month (Categorical) -->
                    <div class="form-group">
                        <label for="month">Last contact month of the year:</label>
                        <select class="form-control" id="month" name="month" >
                            <option value="jan">January</option>
                            <option value="feb">February</option>
                            <option value="mar">March</option>
                            <option value="apr">April</option>
                            <option value="may">May</option>
                            <option value="jun">June</option>
                            <option value="jul">July</option>
                            <option value="aug">August</option>
                            <option value="sep">September</option>
                            <option value="oct">October</option>
                            <option value="nov">November</option>
                            <option value="dec">December</option>
                            <option value="null">Unknown</option>
                        </select>
                    </div>
            
                    <!-- 10. Day of Week (Categorical) -->
                    <div class="form-group">
                        <label for="day_of_week">Last contact day of the week:</label>
                        <select class="form-control" id="day_of_week" name="day_of_week" >
                            <option value="mon">Monday</option>
                            <option value="tue">Tuesday</option>
                            <option value="wed" selected>Wednesday</option>
                            <option value="thu">Thursday</option>
                            <option value="fri">Friday</option>
                            <option value="null" >Unknown</option>
                        </select>
                    </div><!-- 11. Campaign (Numeric) -->
                    <div class="form-group">
                        <label for="campaign">Number of contacts during this campaign:</label>
                        <input type="number" class="form-control" id="campaign" name="campaign" value="1">
                    </div>
                    
                    <!-- 12. Pdays (Numeric) -->
                    <div class="form-group">
                        <label for="pdays">Number of days since last contact from a previous campaign:</label>
                        <input type="number" class="form-control" id="pdays" name="pdays"  value="999">
                    </div>
                    
                    <!-- 13. Previous (Numeric) -->
                    <div class="form-group">
                        <label for="previous">Number of contacts performed before this campaign:</label>
                        <input type="number" class="form-control" id="previous" name="previous" value="9">
                    </div>
                    
                    <!-- 14. Poutcome (Categorical) -->
                    <div class="form-group">
                        <label for="poutcome">Outcome of the previous marketing campaign:</label>
                        <select class="form-control" id="poutcome" name="poutcome" >
                            <option value="failure">Failure</option>
                            <option value="nonexistent">Nonexistent</option>
                            <option value="success">Success</option>
                            <option value="null">Unknown</option>
                        </select>
                    </div>
                    
                    <!-- 15. Emp.var.rate (Numeric) -->
                    <div class="form-group">
                        <label for="emp_var_rate">Employment variation rate (Quarterly):</label>
                        <input type="number" class="form-control" id="emp_var_rate" name="emp_var_rate" value="-1.1">
                    </div>
                    
                    <!-- 16. Cons.price.idx (Numeric) -->
                    <div class="form-group">
                        <label for="cons_price_idx">Consumer price index (Monthly):</label>
                        <input type="number" class="form-control" id="cons_price_idx" name="cons_price_idx" value="94.7">
                    </div>
                    
                    <!-- 17. Cons.conf.idx (Numeric) -->
                    <div class="form-group">
                        <label for="cons_conf_idx">Consumer confidence index (Monthly):</label>
                        <input type="number" class="form-control" id="cons_conf_idx" name="cons_conf_idx" value="-50.8">
                    </div>
                    
                    <!-- 18. Euribor3m (Numeric) -->
                    <div class="form-group">
                        <label for="euribor3m">Euribor 3 month rate (Daily):</label>
                        <input type="number" class="form-control" id="euribor3m" name="euribor3m" value="1.028">
                    </div>
                    
                    <!-- 19. nr.employed (Numeric) -->
                    <div class="form-group">
                        <label for="euribor3m">number of employees - quarterly indicator:</label>
                        <input type="number" class="form-control" id="nr_employed" name="nr_employed" value="4963.6">
                    </div>
            
                    <!-- Add a submit button -->
                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>
            </div>
        </div>
    </div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<script>
    function submitForm(event){
        event.preventDefault()
        let body = collectFormData()
        console.log(body)

        axios.post("http://127.0.0.1:5000/api", body)
            .then(function (response) {
                alert(JSON.stringify(response.data))
            })
            .catch(function (error) {
                console.error('Error making POST request:', error);
            });
    }

    function collectFormData() {
        var form = document.getElementById('form');
        var formData = {};

        for (var i = 0; i < form.elements.length; i++) {
            var element = form.elements[i];
            if (element.name && element.type !== 'submit') {
                let elementName = element.name;

                if( elementName != "day_of_week" ){
                    elementName = element.name.replace(/_/g, ".")
                }

                let value = element.value
                if ( element.type == "number") value = parseFloat(element.value)
                if ( element.value == "null") value = null

                if(element.value !== ""){
                    formData[elementName] = value;
                }else{
                    formData[elementName] = null
                }
            }
        }

        return (formData);
    }
</script>

</body>
</html>